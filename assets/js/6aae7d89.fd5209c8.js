"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[4730],{3369:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"module1-ros2/first-node","title":"Your First ROS 2 Node","description":"Chapter Objectives","source":"@site/docs/module1-ros2/03-first-node.md","sourceDirName":"module1-ros2","slug":"/module1-ros2/first-node","permalink":"/physical-ai-book/docs/module1-ros2/first-node","draft":false,"unlisted":false,"editUrl":"https://github.com/syedaareebashah/physical-ai-book/edit/main/docs/module1-ros2/03-first-node.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Core Concepts: Nodes, Topics, Services","permalink":"/physical-ai-book/docs/module1-ros2/core-concepts"},"next":{"title":"Python Integration with rclpy","permalink":"/physical-ai-book/docs/module1-ros2/python-rclpy"}}');var r=s(4848),i=s(8453);const t={sidebar_position:3},l="Your First ROS 2 Node",o={},c=[{value:"Chapter Objectives",id:"chapter-objectives",level:2},{value:"Creating a ROS 2 Package",id:"creating-a-ros-2-package",level:2},{value:"Package Structure",id:"package-structure",level:3},{value:"Creating the Package",id:"creating-the-package",level:3},{value:"Simple Publisher Node",id:"simple-publisher-node",level:2},{value:"Simple Subscriber Node",id:"simple-subscriber-node",level:2},{value:"Setting up package.xml",id:"setting-up-packagexml",level:2},{value:"Setting up setup.py",id:"setting-up-setuppy",level:2},{value:"Building and Running the Package",id:"building-and-running-the-package",level:2},{value:"Build the Package",id:"build-the-package",level:3},{value:"Run the Nodes",id:"run-the-nodes",level:3},{value:"Alternative: Launch Both Nodes Together",id:"alternative-launch-both-nodes-together",level:3},{value:"ROS 2 Command Line Tools",id:"ros-2-command-line-tools",level:2},{value:"Essential Debugging Commands",id:"essential-debugging-commands",level:3},{value:"Physical AI Context",id:"physical-ai-context",level:2},{value:"Real-world Application",id:"real-world-application",level:3},{value:"Extending to Physical AI",id:"extending-to-physical-ai",level:3},{value:"Chapter Summary",id:"chapter-summary",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"your-first-ros-2-node",children:"Your First ROS 2 Node"})}),"\n",(0,r.jsx)(n.h2,{id:"chapter-objectives",children:"Chapter Objectives"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create a ROS 2 package using colcon"}),"\n",(0,r.jsx)(n.li,{children:"Write a simple publisher and subscriber node"}),"\n",(0,r.jsx)(n.li,{children:"Build and run ROS 2 nodes"}),"\n",(0,r.jsx)(n.li,{children:"Use ROS 2 command-line tools for debugging"}),"\n",(0,r.jsx)(n.li,{children:"Apply basic Physical AI concepts in practice"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-ros-2-package",children:"Creating a ROS 2 Package"}),"\n",(0,r.jsx)(n.p,{children:"Before creating nodes, we need to create a package. A package is a container for ROS 2 code and resources."}),"\n",(0,r.jsx)(n.h3,{id:"package-structure",children:"Package Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"my_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 package.xml\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 my_node.cpp\n\u251c\u2500\u2500 scripts/\n\u251c\u2500\u2500 launch/\n\u251c\u2500\u2500 config/\n\u2514\u2500\u2500 test/\n"})}),"\n",(0,r.jsx)(n.h3,{id:"creating-the-package",children:"Creating the Package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create workspace\nmkdir -p ~/ros2_ws/src\ncd ~/ros2_ws/src\n\n# Create package (Python)\nros2 pkg create --build-type ament_python my_robot_package\n\n# Or for C++\nros2 pkg create --build-type ament_cmake my_robot_package\n"})}),"\n",(0,r.jsx)(n.h2,{id:"simple-publisher-node",children:"Simple Publisher Node"}),"\n",(0,r.jsx)(n.p,{children:"Let's create a simple publisher that simulates sensor data from a Physical AI system:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# File: my_robot_package/my_robot_package/sensor_publisher.py\nimport rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import LaserScan\nfrom std_msgs.msg import Float32\nimport random\n\nclass SensorPublisher(Node):\n    def __init__(self):\n        super().__init__('sensor_publisher')\n\n        # Create publishers for different sensor types\n        self.laser_pub = self.create_publisher(LaserScan, 'laser_scan', 10)\n        self.temperature_pub = self.create_publisher(Float32, 'temperature', 10)\n\n        # Create a timer to publish data at 10Hz\n        self.timer = self.create_timer(0.1, self.publish_sensor_data)\n\n        self.get_logger().info('Sensor Publisher Node Started')\n\n    def publish_sensor_data(self):\n        # Publish simulated laser scan data\n        laser_msg = LaserScan()\n        laser_msg.header.stamp = self.get_clock().now().to_msg()\n        laser_msg.header.frame_id = 'laser_frame'\n        laser_msg.angle_min = -1.57  # -90 degrees\n        laser_msg.angle_max = 1.57   # 90 degrees\n        laser_msg.angle_increment = 0.0174  # 1 degree\n        laser_msg.range_min = 0.1\n        laser_msg.range_max = 10.0\n        laser_msg.ranges = [random.uniform(0.5, 5.0) for _ in range(181)]\n\n        self.laser_pub.publish(laser_msg)\n\n        # Publish simulated temperature data\n        temp_msg = Float32()\n        temp_msg.data = random.uniform(20.0, 30.0)\n        self.temperature_pub.publish(temp_msg)\n\n        self.get_logger().info(f'Published sensor data - Laser ranges: {len(laser_msg.ranges)}, Temperature: {temp_msg.data:.2f}\xb0C')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = SensorPublisher()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"simple-subscriber-node",children:"Simple Subscriber Node"}),"\n",(0,r.jsx)(n.p,{children:"Now let's create a subscriber that processes the sensor data:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# File: my_robot_package/my_robot_package/sensor_subscriber.py\nimport rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import LaserScan\nfrom std_msgs.msg import Float32\nimport math\n\nclass SensorSubscriber(Node):\n    def __init__(self):\n        super().__init__('sensor_subscriber')\n\n        # Create subscribers\n        self.laser_sub = self.create_subscription(\n            LaserScan,\n            'laser_scan',\n            self.laser_callback,\n            10)\n\n        self.temperature_sub = self.create_subscription(\n            Float32,\n            'temperature',\n            self.temperature_callback,\n            10)\n\n        self.get_logger().info('Sensor Subscriber Node Started')\n\n    def laser_callback(self, msg):\n        # Process laser scan data for obstacle detection\n        min_distance = min(msg.ranges) if msg.ranges else float('inf')\n\n        if min_distance < 1.0:  # Obstacle within 1 meter\n            self.get_logger().warn(f'OBSTACLE DETECTED! Distance: {min_distance:.2f}m')\n        else:\n            self.get_logger().info(f'Clear path ahead. Distance: {min_distance:.2f}m')\n\n    def temperature_callback(self, msg):\n        # Process temperature data\n        if msg.data > 28.0:\n            self.get_logger().warn(f'High temperature detected: {msg.data:.2f}\xb0C')\n        else:\n            self.get_logger().info(f'Normal temperature: {msg.data:.2f}\xb0C')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = SensorSubscriber()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"setting-up-packagexml",children:"Setting up package.xml"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_robot_package</name>\n  <version>0.0.0</version>\n  <description>Package for Physical AI sensor processing</description>\n  <maintainer email="user@example.com">user</maintainer>\n  <license>Apache-2.0</license>\n\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n  <depend>sensor_msgs</depend>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"setting-up-setuppy",children:"Setting up setup.py"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\nimport os\nfrom glob import glob\n\npackage_name = 'my_robot_package'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.launch.py')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='user',\n    maintainer_email='user@example.com',\n    description='Package for Physical AI sensor processing',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'sensor_publisher = my_robot_package.sensor_publisher:main',\n            'sensor_subscriber = my_robot_package.sensor_subscriber:main',\n        ],\n    },\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"building-and-running-the-package",children:"Building and Running the Package"}),"\n",(0,r.jsx)(n.h3,{id:"build-the-package",children:"Build the Package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_robot_package\nsource install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h3,{id:"run-the-nodes",children:"Run the Nodes"}),"\n",(0,r.jsx)(n.p,{children:"Terminal 1 - Publisher:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run my_robot_package sensor_publisher\n"})}),"\n",(0,r.jsx)(n.p,{children:"Terminal 2 - Subscriber:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run my_robot_package sensor_subscriber\n"})}),"\n",(0,r.jsx)(n.h3,{id:"alternative-launch-both-nodes-together",children:"Alternative: Launch Both Nodes Together"}),"\n",(0,r.jsxs)(n.p,{children:["Create a launch file ",(0,r.jsx)(n.code,{children:"launch/sensor_nodes.launch.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_robot_package',\n            executable='sensor_publisher',\n            name='sensor_publisher',\n        ),\n        Node(\n            package='my_robot_package',\n            executable='sensor_subscriber',\n            name='sensor_subscriber',\n        ),\n    ])\n"})}),"\n",(0,r.jsx)(n.p,{children:"Run with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_robot_package sensor_nodes.launch.py\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-command-line-tools",children:"ROS 2 Command Line Tools"}),"\n",(0,r.jsx)(n.h3,{id:"essential-debugging-commands",children:"Essential Debugging Commands"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List all topics\nros2 topic list\n\n# Echo messages on a topic\nros2 topic echo /laser_scan\n\n# List all nodes\nros2 node list\n\n# Get information about a node\nros2 node info /sensor_publisher\n\n# List all services\nros2 service list\n\n# Check network connectivity\nros2 doctor\n"})}),"\n",(0,r.jsx)(n.h2,{id:"physical-ai-context",children:"Physical AI Context"}),"\n",(0,r.jsx)(n.h3,{id:"real-world-application",children:"Real-world Application"}),"\n",(0,r.jsx)(n.p,{children:"This simple example demonstrates the foundation of Physical AI systems:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sensor Integration"}),": Multiple sensor types feeding data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Real-time Processing"}),": Continuous data processing pipeline"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Decision Making"}),": Obstacle detection and response"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Modular Architecture"}),": Separate publisher and subscriber nodes"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"extending-to-physical-ai",children:"Extending to Physical AI"}),"\n",(0,r.jsx)(n.p,{children:"To make this more realistic for Physical AI:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Replace random data with actual sensor drivers"}),"\n",(0,r.jsx)(n.li,{children:"Add more sophisticated processing algorithms"}),"\n",(0,r.jsx)(n.li,{children:"Include actuator control nodes"}),"\n",(0,r.jsx)(n.li,{children:"Implement safety and error handling"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"chapter-summary",children:"Chapter Summary"}),"\n",(0,r.jsx)(n.p,{children:"You've created your first complete ROS 2 package with publisher and subscriber nodes. This demonstrates the fundamental communication patterns used in Physical AI systems. The modular approach allows for scalable and maintainable robot software."}),"\n",(0,r.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Modify the sensor publisher to simulate a moving obstacle."}),"\n",(0,r.jsx)(n.li,{children:"Add a third node that calculates and publishes the robot's velocity based on sensor data."}),"\n",(0,r.jsx)(n.li,{children:"Implement a service that allows external nodes to request sensor calibration."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"In the next chapter, we'll dive deeper into Python integration with rclpy and explore more advanced ROS 2 features."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var a=s(6540);const r={},i=a.createContext(r);function t(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);